<link rel="import" href="bower_components/neon-animation/neon-animated-pages.html">
<link rel="import" href="bower_components/neon-animation/neon-animations.html">
<link rel="import" href="bower_components/polymerfire/firebase-app.html">
<link rel="import" href="bower_components/app-route/app-route.html">
<link rel="import" href="bower_components/app-route/app-location.html">
<link rel="import" href="src/theme/default-theme.html">
<link rel="import" href="./landing-page.html">
<link rel="import" href="./app-page.html">
<link rel="import" href="src/theme/shared-styles.html">

<dom-module id="labelsense-app">
	<template>
		<style include="shared-styles">
			:host {
				display: block;
        height: 100%;
			}
		</style>

    <firebase-app
			id="firebase"
			auth-domain="labelsense.firebaseapp.com"
		  database-url="https://labelsense.firebaseio.com/"
		  api-key="AIzaSyBIKI0ODwCeMNMbVCvDWgEUmIa1d2N1GP0">
		</firebase-app>

		<app-location route="{{route}}" query-params="{{queryParams}}"></app-location>
    <app-route route="{{route}}" pattern="/:page" tail={{subroute}}></app-route>
    <neon-animated-pages role="main"  selected="[[route.path]]" attr-for-selected="name" selected-attribute="visible">
      <landing-page name="/" path=[[route.path]]></landing-page>
      <app-page name="app" route=[[route]] ></app-page>
    </neon-animated-pages>

	</template>
	<script>
		Polymer({
			is: 'labelsense-app',
			properties: {
				page: {
            type: String,
            value: '/',
            reflectToAttribute: true
          },
          route: Object,
          subroute: Object,
          queryParams: Object
			},
			listeners: {
          routeTo: '_routeTo'
      },
			observers: [
        '_routeChange(route.path)'
      ],

     	_routeChange: function(path) {
        this.page = '/';
      },
      _routeTo: function(e, route) {
        this.queryParams = route.queryParams;
        this.route.path = route.path;
        this.set('route.path', route.path);
      }
		});
	</script>
</dom-module>