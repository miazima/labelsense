<link rel="import" href="bower_components/neon-animation/neon-shared-element-animatable-behavior.html">
<link rel="import" href="bower_components/neon-animation/neon-animated-pages.html">
<link rel="import" href="bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="bower_components/paper-menu-button/paper-menu-button.html">
<link rel="import" href="bower_components/polymerfire/firebase-auth.html">
<link rel="import" href="bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="bower_components/paper-menu/paper-menu.html">
<link rel="import" href="bower_components/paper-item/paper-item.html">
<link rel="import" href="bower_components/iron-icons/iron-icons.html">
<link rel="import" href="bower_components/app-layout/app-layout.html">
<link rel="import" href="src/behaviors/route-behavior.html">
<link rel="import" href="src/theme/shared-styles.html">
<link rel="import" href="src/admin-config.html">
<link rel="import" href="src/label-page.html">
<link rel="import" href="src/theme/shared-styles.html">

<dom-module id="app-page">
  <template>
    <style include="shared-styles">
      :host {
        display: block;
      }
      app-header {
        background-color: var(--paper-teal-500);
        color: white;
      }
      paper-menu {
        padding-top: 0px;
      }
      paper-item.settingsHeader {
        background-color: var(--paper-teal-800);
        color: white;
        padding-top: 8px;
      }
      #settingsMenu paper-item {
        cursor: pointer;
      }
      #analysisDropdown iron-dropdown.paper-menu-button {
        color: red;
      }
      paper-menu-button {
         --paper-menu-button-dropdown:{
            width:200px;
            top:64px !important;
            right: 0px;
            left: initial !important;
          };
      }
      .page-wrapper {
        padding: 2em;
      }
    </style>

    <firebase-auth
      id="auth" 
      user="{{user}}" 
      status-known="{{statusKnown}}"
      signed-in="{{signedIn}}"
      provider="google">
    </firebase-auth>

    <app-header id="header" reveals>
      <app-toolbar>
        <paper-icon-button icon="menu" onclick="drawer.toggle()"></paper-icon-button>
        <div main-title>LabelSense</div>
        <!-- <paper-icon-button icon="settings"></paper-icon-button> -->
        <paper-menu-button vertical-align="top" horizontal-align="right" id="analysisDropdown">
          <paper-icon-button icon="settings" class="dropdown-trigger"></paper-icon-button>
          <paper-menu id="settingsMenu" class="dropdown-content">
            <paper-item class="settingsHeader">Hello [[user.displayName]]!</paper-item>
            <paper-item>App Settings</paper-item>
            <paper-item hidden$="[[!user]]" on-tap="logout">Logout</paper-item>
<!--             <paper-item>Settings</paper-item>
            <paper-item>Help</paper-item> -->
          </paper-menu>
      </paper-menu-button>
      </app-toolbar>
    </app-header>

    <neon-animated-pages selected="0" entry-animation="slide-from-right-animation" exit-animation="slide-left-animation">
      <admin-config class="page-wrapper"></admin-config>
      <label-page class="page-wrapper" tokens="[[tokens]]" tokens-per-page="10" labels='["hello","bye","hello again"]'></label-page>
    </neon-animated-pages>
    
  </template>
  <script>
    Polymer({
      is: 'app-page',
      behaviors: [
        Polymer.NeonSharedElementAnimatableBehavior,
        HiveOSS.RouteBehavior
      ],
      properties: {
        sharedElements: {
          value: function() {
            return {
              'hero': this.$.header
            }
          }
        },
        animationConfig: {
          value: function() {
            return {
              'entry': [{
                name: 'hero-animation',
                id: 'hero',
                toPage: this
              },
              {
                name: 'fade-in-animation',
                node: this.$.settingsMenu
              }]
            };
          }
        }
      },

      logout: function() {
        this.routeToLandingPage();
        return this.$.auth.signOut();

      }
    });
  </script>
</dom-module>