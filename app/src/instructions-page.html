<link rel="import" href="../bower_components/paper-card/paper-card.html">
<link rel="import" href="theme/shared-styles.html">

<dom-module id="instructions-page">
	<template>
		<style include="shared-styles">
			:host {
				display: block;
			}
			div.button {
				padding: 20px;
			}
			paper-button { 
				padding-right: 3em; 
				padding-left: 3em; 
			}
		</style>

		<div class="layout vertical">
			<paper-card class="content-wrapper self-center" heading="[[title]]">
			  <div class="card-content layout vertical">
				  <div>
				  	<template is="dom-repeat" items=[[paragraphs]]>
				  		<p>[[item]]</p>
				  	</template>
				  </div>
				  <div class="button self-center">
				  	<paper-button class="primary-btn" on-tap="routeToPage" raised>[[buttonContent]]</paper-button>
				  </div>
			  </div>
			</paper-card>
		</div>
		
	</template>
	<script>
		Polymer({
			is: 'instructions-page',

			properties: {
				spec: {
					type: Object,
					observer: '_customPage'
				},
				title: {
					type: String,
					value: 'Instructions'
				},
				instructions: String,
				buttonContent: {
					type: String,
					value: 'Start'
				},
				paragraphs: {
					type: Array,
					computed: '_parseInstructions(instructions)'
				}
			},

			routeToPage: function () {
				if (this.spec) {
					this.fire('log-out');
					return;
				}
				this.fire('route-page', 'label');
			},

			_customPage: function(spec) {
				this.title = spec.title;
				this.buttonContent = spec.buttonContent;
				this.instructions = spec.content;
			},

			_parseInstructions: function(ins) {
				if (!ins) return;
				return ins.split('\n');
			}
		});
	</script>
</dom-module>